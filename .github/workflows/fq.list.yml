name: Update fq.list
on:
  workflow_dispatch:
  #schedule:
   #- cron: '0 */4 * * *'  # 每天9点执行一次

jobs:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download file from URL
        run: |
          curl -o fq.list "https://vless.yuki.ren/8ed96004-092c-42e9-9922-06a5080cdacc?base64"
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add fq.list
          git commit -m "更新 fq.list"
          git push
      - name: Retry on failure
        if: ${{ failure() }}
        uses: retry/retry@v2
        with:
          timeout_minutes: 5
          retry_on: 'failure'
          max_attempts: 3
